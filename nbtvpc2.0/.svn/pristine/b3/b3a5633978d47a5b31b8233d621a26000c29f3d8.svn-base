
<style lang="less">
    .size {
        h2{
            font-size: 30px !important;
        }
        h3 {
            font-size: 30px !important;
        }
        span {
            font-size: 26px !important;
        }
        input {
            font-size: 26px !important;
        }
        button {
            font-size: 26px !important;
        }
        a {
            font-size: 26px !important;
        }
        li{
            font-size: 26px !important;
        }
        p{
            font-size: 26px !important;
        }
    }
    .edui-default .edui-editor-bottomContainer{
        display: none !important;
    }
    .el-input {
        width: 370px;
        font-size: 20px;
        input {
            height: 60px;
        }
    }
    .el-select-dropdown__item {
        font-size: 20px;
        height: 50px;
        line-height: 50px;
        padding: 0;
    }
    .el-select-dropdown__item span {
        display: inline-block;
        height: 50px;
        line-height: 50px !important;
        margin-left: 10px;
    }
    .el-input{
        font-size: 22px !important;
    }
    .page{
        padding-left: 30px;
        margin: 30px 0 100px 0;

        span{
            display: inline-block;
            height: 40px;
            line-height: 40px;
            vertical-align: middle;
        }
        .el-pagination{
            display: inline-block;
        }
        .el-pager li{
            font-size: 20px;
            height: 40px;
            width: 40px;
            line-height: 40px;
        }
        .el-pager li.btn-quicknext, .el-pager li.btn-quickprev{
            line-height: 40px;
        }
        .el-pagination button, .el-pagination span{
            height: 40px;
            line-height: 40px;
            font-size: 20px;
        }
        .el-pagination__editor{
            height: 40px;
            width: 40px;
            line-height: 40px;
            font-size: 20px;
        }
        .el-icon-arrow-left:before{
            content: '上一页';
            font-size: 20px;
        }
        .el-icon-arrow-right:before{
            content: '下一页';
            font-size: 20px;
        }
    }

</style>
<style lang="less">
    /*公共样式*/
    body{
        background: url("./img/bg.jpg") no-repeat;
        background-size: cover;
    }
    .container {
        width: 1200px;
        margin: 0 auto;
    }

    .size {
        h2{
            font-size: 30px !important;
        }
        h3 {
            font-size: 30px !important;
        }
        span {
            font-size: 26px !important;
        }
        input {
            font-size: 26px !important;
        }
        button {
            font-size: 26px !important;
        }
        a {
            font-size: 26px !important;
        }
        li{
            font-size: 26px !important;
        }
        p{
            font-size: 26px !important;
        }
    }

    /*内容头部*/
    .c-header {
        position: relative;
        text-align: center;
        color: #fff;
        .c-h-dz{
            position: absolute;
            top: 30px;
            right: 30px;
            width: 120px;
            height: 50px;
            line-height:50px;
            background-color: #fff;
            border-radius: 5px;
            text-align: left;
            cursor: pointer;
            img{
                position: absolute;
                top: 12px;
                left: 28px;
            }
            span{
                display: inline-block;
                margin-left: 62px;
                width: 50px;
                color: #000;
                text-align: center;
            }
        }
        .c-h-tx {
            display: inline-block;
            margin-top: 35px;
            font-size: 18px;
            width: 150px;
            height: 150px;
            >div{
                display: inline-block;
                background:url("./img/timg.jpg") no-repeat;
                border-radius: 50%;
                width: 150px;
                height: 150px;
                background-size: 150px 150px;
                input{
                    width: 150px;
                    height: 150px;
                    vertical-align: middle;
                    opacity: 0;
                }
            }
        }
        h3 {
            font-size: 26px;
            margin-top: 30px;
        }
        p {
            margin-top: 20px;
            span{
                cursor: pointer;
            }
        }
        ul {
            margin-top: 50px;
            margin-bottom: 20px;
            overflow: hidden;
            li {
                float: left;
                width: 171px;
                text-align: center;
                cursor: pointer;
                a{
                    color:#fff;
                }
            }
        }
    }
    .c-l-class {
        overflow: hidden;
        padding:30px;
        padding-top: 0;
        background-color: #fff;
        margin-bottom: 30px;
        >p{
            font-size: 0;
            margin-top: 30px;
            span{
                font-size: 24px;
            }
            button{
                width: 124px;
                height: 50px;
                background-color: #fff;
                border: 1px solid #999;
                border-radius: 5px;
                font-size: 26px;
                color: #666666;
                margin-right: 30px;
                cursor: pointer;
                &.b-xz{
                    color: #fff;
                    border: 0;
                    background-color: #3a71a8;
                }
            }
        }
    }

    /*内容列表*/
    .c-list {
        /*内容*/
        .c-l-classcnt {
            background-color: #fff;
            .c-listone{
                overflow: hidden;
                padding: 0 60px;
                border-bottom: 1px solid #e1e1e1;
                padding: 60px;
                >p{
                    font-size: 24px;
                    margin: 30px 0;
                    line-height: 1.5;
                }
                .c-list-tit{
                    >img{
                        float: left;
                        width: 110px;
                        height: 110px;
                        border-radius: 50%;
                    }
                    >div{
                        &:nth-of-type(1){
                            float: left;
                            height: 110px;
                            line-height: 110px;
                            margin-left: 20px;
                               h3{
                                   margin-top: 30px;
                                   font-size: 24px;
                               }
                               p{
                                   margin-top: 10px;
                                   font-size: 20px;
                                   color: #999;
                               }
                        }
                        &:nth-of-type(2){
                            margin-top: 20px;
                            float: right;
                            text-align: right;
                            >div{
                                >img{
                                    width: 25px;
                                    height: 25px;
                                    vertical-align: bottom;
                                }
                                span{
                                    font-size: 24px;
                                    vertical-align: bottom;
                                }
                            }
                            h3{
                                overflow: hidden;
                                text-align: right;
                                font-size: 24px;
                                line-height: 1.5;
                                margin-top: 30px;
                                margin-right: -15px;
                            }
                        }

                    }
                }
                .c-list-cnt{
                    .list-img{
                        font-size: 0;
                        img{
                            width: 330px;
                            height: 330px;
                            margin-right: 45px;
                            margin-top: 30px;
                            &:nth-of-type(3n){
                                margin-right: 0;
                            }
                            &:nth-of-type(1),&:nth-of-type(2),&:nth-of-type(3){
                                margin-top:0;
                            }
                        }
                    }
                    .list-vedio{
                        embed{
                            display: block;
                            margin: 0 auto;
                        }
                    }
                }

            }
        }
        /*分页*/
        .c-l-foot{
            height: 105px;
            padding: 45px 0;
            padding-left: 60px;
            background-color: #fff;

        }
    }

    /*发布信息*/
    .c-text {
        background-color: #fff;
        > div {
            padding: 0 30px;
            overflow: hidden;
            height: 278px;
            >div {
                font-size: 24px;
                &:nth-of-type(1) {
                    display: flex;
                    margin-top: 60px;
                    span {
                        height: 60px;
                        line-height: 60px;
                    }
                    .el-input{
                        flex: 1;
                    }
                }
                &:nth-of-type(2) {
                    margin-top: 30px;
                    display: flex;
                    justify-content: space-between;
                    >div{
                        width: auto;
                        .el-input {
                            float: left;
                            width: 236px;
                        }
                        span {
                            float: left;
                            height: 60px;
                            line-height: 60px;
                            font-size: 24px;
                        }
                    }
                }
                input {
                    height: 60px;
                }
            }
        }
    }

    /*富文本*/
    .c-send{
        margin-bottom: 90px;
        >p{
            height: 65px;
            line-height:65px;
            background-color: #3a71a8;
            font-size: 26px;
            color: #fff;
            padding-left: 50px;
        }
        .f-button{
            background-color: #fff;
            button{
                float: right;
                width: 90px;
                height: 40px;
                border: 0;
                border-radius: 5px;
                color: #fff;
                font-size: 22px;
                margin: 20px 60px 20px 0;
                &:nth-of-type(1){
                    background-color: #858585;
                }
                &:nth-of-type(2){
                    background-color: #3A71A8;
                }
            }
        }

    }

</style>
<template>
    <div>
        <AllHead @state="headstatus"></AllHead>

        <div class="g-content" ref="size">
            <!--内容头部-->
            <div class="container">
                <div class="c-header">
                    <div class="c-h-dz" @click.once="addznum()" ref="znum"><img src="./img/zan.png" alt=""><span>{{personal.znum}}</span></div>
                    <div class="c-h-tx"><div :style="{backgroundImage:`url(${personal.img})`}"><input type="file" @change="uptx" ref="uptx" disabled></div></div>
                    <h3>{{personal.name}}</h3>
                    <p v-show="state==0"><span @click="editname">修改昵称</span>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;<span @click="editimg">修改头像</span></p>
                    <p v-show="state==2"><span @click="state=0">取消</span>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;<span @click="saveimg">保存</span></p>
                    <p v-show="state==1"><span @click="state=0">取消</span>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;<span @click="savename">保存</span></p>
                    <ul class="clearfix">
                        <li><a href="./detailcenter.html#/vedio">视频记录</a></li>
                        <li><a href="./detailcenter.html#/sign">签到记录</a></li>
                        <li><a href="./detailcenter.html#/mymsgcenter/msgcenter">消息中心</a></li>
                        <li><a href="./detailcenter.html#/personal">个人资料</a></li>
                    </ul>
                </div>
            </div>
            <!--分类-->
            <div class="c-l-class">
                <p>
                    <span>展示格式：</span>
                    <button class="b-xz">文字</button>
                    <button>图片</button>
                    <button>视频</button>
                </p>
                <p>
                    <span>成果分类：</span>
                    <button>文字</button>
                    <button>音乐</button>
                    <button>美术</button>
                    <button>舞蹈</button>
                    <button>其他</button>
                </p>
            </div>
            <!--内容列表-->
            <div class="c-list">
                <!--分类内容-->
                <div class="c-l-classcnt">

                    <div class="c-listone">
                        <div class="c-list-tit clearfix">
                            <img src="./img/timg.jpg" alt="">
                            <div>
                                <h3>认真的雪</h3>
                                <p>2017</p>
                            </div>
                            <div>
                                <div>
                                    <img src="./img/zan.png" alt="">
                                    <span>100</span>
                                </div>
                               <h3>【文学】</h3>
                            </div>
                        </div>
                        <p>我今天</p>
                        <div class="c-list-cnt">
                            <div class="list-img" style="display: none">
                                <img src="./img/timg.jpg" alt="">
                                <img src="./img/timg.jpg" alt="">
                                <img src="./img/timg.jpg" alt="">
                                <img src="./img/timg.jpg" alt="">
                                <img src="./img/timg.jpg" alt="">
                            </div>

                            <div class="list-vedio">
                                <embed src='http://player.youku.com/player.php/sid/XMzQzMzM3MzA2MA==/v.swf' allowFullScreen='true' quality='high' width='600' height='400' align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'></embed>
                            </div>

                        </div>
                    </div>

                </div>
                <!--分页-->
                <div class="c-l-foot">
                    <div class="page">
                        <el-pagination
                                @current-change="handleCurrentChange"
                                :current-page="currentPage"
                                :page-size="10"
                                layout=" prev, pager, next, total"
                                :total="100">
                        </el-pagination>
                        <span>共10页</span>
                    </div>
                </div>
            </div>
            <!--发布信息-->
            <div class="c-text">
                <div>
                    <div>
                        <span>标题：</span>
                        <el-input placeholder="请输入标题名称" v-model="msg.title"></el-input>
                    </div>

                    <div>
                        <div class="clearfix">
                            <span>作者：</span>
                            <el-input placeholder="请输入作者" v-model="msg.autor"></el-input>
                        </div>

                        <div class="clearfix">
                            <span>班级：</span>
                            <el-input placeholder="请输入班级" v-model="msg.class"></el-input>
                        </div>

                        <div class="clearfix">
                            <span>类型：</span>
                            <el-select v-model="resultVal" placeholder="成果分类">
                                <el-option
                                        v-for="item in resultAll"
                                        :key="item.value"
                                        :label="item.label"
                                        :value="item.value">
                                </el-option>
                            </el-select>
                        </div>

                    </div>
                </div>
            </div>
            <!--发布内容-->
            <div class="c-send">
                <p>发表成果交流</p>
                <div class="editor-container">
                <UE :defaultMsg=defaultMsg :config=config :id=ue1 ref="ue"></UE>
            </div>
                <div class="f-button clearfix"><button @click="clearcnt">取消</button> <button @click="getUEContent">发表</button></div>
            </div>
        </div>

        <McFoot></McFoot>

    </div>
</template>
<script>
  import AllHead from 'components/allHead';
  import McFoot from 'components/McFoot';
  import tximg from './img/timg.jpg'
  import UE from 'components/ue/ue.vue';

  export default {
    data() {
      return {
        headstate:false,
        /*0:不编辑 1：编辑名字 2：修改头像*/
        state:0,
        /*成果分类*/
        classAll: [{value: '文学', label: '文学'},{value: '音乐', label: '音乐'},{value: '美术', label: '美术'}],
        classVal: '所有分类',/*选中值*/
        /*类型标签*/
        typeAll: [{value: '文学集锦', label: '文学集锦'}, {value: '书画摄影', label: '书画摄影'}, {value: '活力视频', label: '活力视频'}],
        typeVal: '所有类型',
        /*类型*/
        resultAll: [{value: '文学', label: '文学'},{value: '音乐', label: '音乐'},{value: '美术', label: '美术'}],
        resultVal:'',
        /*个人信息*/
        personal:{
          name:'老人与海',
          img:tximg,
          znum:0
        },
        /*发布信息*/
        msg:{
          title:'',
          autor:'',
          class:'',
        },
        total:100,
        currentPage:1,
        defaultMsg: '',
        config: {
          initialFrameWidth: null,
          initialFrameHeight: 350
        },
        ue1: "ue1", // 不同编辑器必须不同的id
      }
    },
    watch:{
      headstate(val){
        if(val){
          $('.el-select-dropdown__item').css({'font-size':'26px'});
        }else{
          $('.el-select-dropdown__item').css({'font-size':'2px'});
        }
      }
    },
    methods: {
      headstatus(val){
        this.headstate = val;
      },
      /*分页*/
      handleCurrentChange(val) {

      },
      upphoto(el,fn){
        var maxsize = 2*1024*1024;
        var file = this.$refs[el].files;
        for(var j =0;j<file.length;j++){
          if(file[j].size>maxsize){
            this.$message.error('图片大小请限制在2M以内！');
            this.$refs[el].value='';
            return;
          }
        };
        for (var i = 0; i < file.length; i++) {
          var fileReader = new FileReader();
          fileReader.readAsDataURL(file[i]);
          fileReader.onloadend = function (e) {
            var obj = {};
            obj.img = e.target.result;
            fn(obj);
          };
        }
      },
      uptx(){
        var self = this;
        this.upphoto('uptx',function(obj){
          self.personal.img=obj.img;
        });
      },
      editimg(){
        this.state=2;
        this.$refs.uptx.removeAttribute('disabled');
      },
      editname(){
        this.state=1;
      },
      saveimg(){
        /*接口上传图片*/
      },
      savename(){
        /*接口上传昵称*/
      },
      addznum(){
        this.personal.znum++;
        /*发送给接口*/
      },
      addwz(index){
        this.articleAll[index].znum++;
        /*发送给接口*/
      },
      classlink(index){
        var type = this.articleAll[index].class;
        if(type=='文学'){
            window.open('./centercnt.html#/textcnt');
        }else if(type =='图片'){
          window.open('./centercnt.html#/imgcnt');
        }else if( type == '视频'){
          window.open('./centercnt.html#/vediocnt');
        }
      },
      errorPop(str){
        this.$message.error(str);
      },
      /*发布内容*/
      applyCnt(){
        /*校验*/
        if(this.msg.title==''){
          this.errorPop('请输入标题！');
          return;
        }
        if(this.msg.autor==''){
          this.errorPop('请输入作者！');
          return;
        }
        if(this.msg.class==''){
          this.errorPop('请输入班级！');
          return;
        }
        if(this.resultVal==''){
          this.errorPop('请选择分类！');
          return;
        }
        if(this.getUEContent()==''){
          this.errorPop('请输入内容！');
          return;
        }
        /*接口发送给后台*/
      },
      getUEContent() {
        let content = this.$refs.ue.getUEContent(); // 调用子组件方法
//        console.log(this.$refs.ue);
//        this.$notify({
//          title: '获取成功，可在控制台查看！',
//          message: content,
//          type: 'success'
//        });
//        console.log(content)
        return content;

      },
      getUEContentTxt() {
        let content = this.$refs.ue.getUEContentTxt(); // 调用子组件方法
//        this.$notify({
//          title: '获取成功，可在控制台查看！',
//          message: content,
//          type: 'success'
//        });
//        console.log(content)
        return content;
      },
      clearcnt(){
        this.$refs.ue.editor.execCommand('cleardoc');
      }
    },
    components: {
      AllHead, McFoot,UE
    },
  }
</script>
